"use strict";function _objectValues(e){for(var t=[],i=Object.keys(e),n=0;n<i.length;n++)t.push(e[i[n]]);return t}(failureMessageHelper=void 0===failureMessageHelper?{}:failureMessageHelper).init=function(){var e=this;(e.$wrapper=$(".failureMessage__wrapper")).length&&(e.bindHide(),e.bindHideAccountLoadFailureMessage(),e.bindOldBrowserMessage())},failureMessageHelper.bindHide=function(){var e=this;e.$close=$(".failureMessage__close",e.$wrapper),e.$close.off("click.failureMessageHelper").on("click.failureMessageHelper",function(){$(this).hide(),e.$wrapper.removeClass("failureMessage__wrapper--active")})},failureMessageHelper.bindHideAccountLoadFailureMessage=function(){"AccountLoadFailureMessage"==this.$wrapper.attr("id")&&this.$close.off("click.failureMessageHelperAccountLoadFailureMessage").on("click.failureMessageHelperAccountLoadFailureMessage",function(){$.cookie("AccountLoadFailureMessageShown","true",{path:"/"})})},failureMessageHelper.bindOldBrowserMessage=function(){this.getCookie("is_mobile_app")||$("body").hasClass("body--mobile")||[{name:"Chrome",minVersion:49},{name:"MSIE",minVersion:11},{name:"Firefox",minVersion:52},{name:"Opera",minVersion:45}].filter(function(e){var t=new RegExp(e.name+"\\W\\d+").exec(navigator.userAgent);t&&(t=/\d+/.exec(t[0]))&&e.minVersion>t[0]&&$("#oldBrowserMessage").addClass("failureMessage__wrapper--active").show()})},failureMessageHelper.getCookie=function(e){var t=document.cookie,e=e+"=",i=t.indexOf("; "+e);if(-1==i){if(0!=(i=t.indexOf(e)))return null}else{i+=2;var n=document.cookie.indexOf(";",i);-1==n&&(n=t.length)}return decodeURI(t.substring(i+e.length,n))},$(function(){failureMessageHelper.init()});var failureMessageHelper,commonAlertHelper={};commonAlertHelper.init=function(){this.$body=$("body"),commonAlertHelper.defaultAlert()},commonAlertHelper.defaultAlert=function(){$(".commonAlert__overflow--active").each(function(){var e=$(this);new commonAlert(e).show()})},$(function(){commonAlertHelper.init()});var commonAlert=commonAlert||function(t){this.init=function(){var e=this;e.$html=$("html"),e.$body=$("body"),e.$wrapper=$(t),e.bindHideMessage()},this.bindHideMessage=function(){var e=this;e.$wrapper.add(".commonAlert__close",e.$wrapper).add(".commonAlert__buttonClose",e.$wrapper).on("click.commonAlert",function(){e.$wrapper.data("location-on-hide")?window.location=e.$wrapper.data("location-on-hide"):($("body").unmask(),e.hide())}),$(".commonAlert__wrapper",e.$wrapper).on("click.commonAlert",function(e){(e=e||window.event).stopPropagation()})},this.setTitle=function(e){this.$wrapper.find(".commonAlert__title").html(e)},this.setBody=function(e){this.$wrapper.find(".commonAlert__text").html(e)},this.show=function(){var e=this;"Mobile"!=deviceType&&"undefined"!=typeof commonModalHelper&&commonModalHelper.hideActiveModal(),e.$wrapper.appendTo(e.$body).fadeIn(200,function(){e.$wrapper.addClass("commonAlert__overflow--active"),e.$body.hasClass("body--blurred")||e.$body.hasClass("body--noscroll")?e.wasBlurredEarlier=!0:e.$body.addClass("body--blurred body--noscroll"),e.$html.addClass("ntml--noscroll"),e.bindHideOnEsc()})},this.hide=function(){var e=this;"Mobile"!=deviceType&&"undefined"!=typeof commonModalHelper&&commonModalHelper.showActiveModal(),e.wasBlurredEarlier||e.$body.removeClass("body--blurred body--noscroll"),e.$html.removeClass("ntml--noscroll"),e.$wrapper.fadeOut(200,function(){e.$wrapper.removeClass("commonAlert__overflow--active")}),$(document).off("keydown.commonAlertHelper")},this.bindHideOnEsc=function(){var t=this;$(document).one("keydown.commonAlertHelper",function(e){27==((e=e||window.event).which||e.keyCode||e.charCode)&&t.hide()})},this.init()};$(function(){alertOpenAppHelper.init()}),window.alertOpenAppHelper={init:function(){var e=this;"true"!==$.cookie("is_mobile_app")&&(e.$html=$("html"),e.$body=$("body"),e.$buttons=$("[data-alert-id]"),e.$wrapper=$(".alert-open-app"),e.$wrapper.appendTo(e.$body),e.bindAlertsToButtons(),e.bindHideMessage())},bindAlertsToButtons:function(){var t=this;t.$buttons.off().on("click.alertOpenAppHelper",function(e){t.setParams(this),t.show()})},bindHideMessage:function(){var e=this;e.$wrapper.add(".alert-open-app__button").on("click.alertOpenAppHelper",function(){$("body").unmask(),e.hide()}),$(".alert-open-app__wrapper",e.$wrapper).on("click.alertOpenAppHelper",function(e){(e=e||window.event).stopPropagation()})},show:function(){var e=this;e.$wrapper.fadeIn(200,function(){e.$body.hasClass("body--noscroll")||e.$body.addClass("body--noscroll"),e.$html.addClass("html--noscroll")})},hide:function(){var e=this;e.$body.hasClass("body--noPointerEvents")||(e.$body.removeClass("body--noscroll"),e.$html.removeClass("html--noscroll")),e.$wrapper.fadeOut(200),$(document).off("keydown.alertOpenAppHelper")},setParams:function(e){var e=$(e).data("alert-id"),e=$(".alert-open-app__text-wrapper[data-bind-id='"+e+"'"),t=$(".alert-open-app__title",e).text(),e=$(".alert-open-app__link",e).text();$(".alert-open-app__title",this.$wrapper).text(t),$(".alert-open-app__link",this.$wrapper).attr("href",e)}};var inputWithPlaceholderHelper=inputWithPlaceholderHelper||{};function animateKaspiPreloaderSvg(e){var t;if(!(t=e.find(".kaspiPreloader__svg")).length)return!1;t.css("animation","none").animate({borderSpacing:360},{step:function(e,t){$(this).css("-webkit-transform","rotate("+e+"deg)"),$(this).css("-moz-transform","rotate("+e+"deg)"),$(this).css("transform","rotate("+e+"deg)")},easing:"linear",duration:3e3,complete:function(){t.css({borderSpacing:0}),animateKaspiPreloaderSvg(e)}})}function animateKaspiPreloaderCircle(e){var t,i=1,n=(i+314.9)/85;if(!(t=e.find(".kaspiPreloader__circle")).length)return!1;t.css({animation:"none","stroke-dasharray":i+", 552","stroke-dashoffset":0}).animate({"stroke-dashoffset":-117.3},{step:function(e,t){$(this).css({"stroke-dasharray":(i+=n)+", 552"})},easing:"linear",duration:1150,complete:function(){t.animate({"stroke-dashoffset":-417.4},{easing:"linear",duration:1150,complete:function(){animateKaspiPreloaderCircle(e)}})}})}function calculateCircleRadius(){var e=$(".kaspiPreloader__svg").width()/2;$(".kaspiPreloader__svg circle").attr("cx",e),$(".kaspiPreloader__svg circle").attr("cy",e),$(".kaspiPreloader__svg circle").attr("r",e-2)}inputWithPlaceholderHelper.init=function(){this.$inputs=$("input[data-type=inputWithPlaceholder]"),this.setDefault(),this.bindPlaceholders(),this.bindSubmit()},inputWithPlaceholderHelper.setDefault=function(){this.$inputs.each(function(){var e=$(this);e.attr("data-empty",!e.val())})},inputWithPlaceholderHelper.bindPlaceholders=function(e){(e=e||this.$inputs).off("blur.inputWithPlaceholderHelper change.inputWithPlaceholderHelper").on("blur.inputWithPlaceholderHelper change.inputWithPlaceholderHelper",function(){var e=$(this);e.attr("data-empty",!e.val())})},inputWithPlaceholderHelper.bindSubmit=function(){var t=this;t.$inputs.each(function(){$(this).closest("form").off("submit.inputWithPlaceholderHelper").on("submit.inputWithPlaceholderHelper",function(){var e=$(this);setTimeout(function(){e.find(t.$inputs).each(function(){var e=$(this);e.val()||e.val("")})},4)})})},$(function(){inputWithPlaceholderHelper.init()}),function(n){n.fn.mask=function(e){var t,i;!e&&"true"==n.cookie("is_mobile_app")||(e=n(this),n(".kaspiPreloader__overlay").remove(),n("body").addClass("body--masked"),t=n('<div class="kaspiPreloader__overlay"></div>').on("click",function(e){(e=e||window.event).stopPropagation()}),e.append(t),i=n('<div class="kaspiPreloader__wrapper"><div class="kaspiPreloader__loader"></div><svg class="kaspiPreloader__svg"><circle cx="69" cy="69" r="67" fill="none" stroke-width="2" class="kaspiPreloader__circle"></circle></svg></div>'),t.append(i),(document.documentMode||/Edge/.test(navigator.userAgent))&&(animateKaspiPreloaderSvg(e),animateKaspiPreloaderCircle(e)))},n.fn.unmask=function(){n(this).find(".kaspiPreloader__wrapper, .kaspiPreloader__overlay").remove(),n("body").removeClass("body--masked")}}(jQuery),window.logoutPopupHelper||(window.logoutPopupHelper={}),logoutPopupHelper.init=function(){var e,t=this;t.$body=$("body"),(t.$wrapper=$("#logoutPopup")).length&&(e=new Date,t.kaspiSignOutTimerDate=Date.parse(e),t.kaspiSignOutTimer=9e5,localStorage&&localStorage.setItem("kaspiSignOutTimer",e),t.bindTimeout(t.kaspiSignOutTimer))},logoutPopupHelper.bindTimeout=function(e){var t=this;void 0!==commonAlert&&(t.alert=new commonAlert(t.$wrapper)),setTimeout(function(){t.kaspiSignOutTimerDate+=t.kaspiSignOutTimer,localStorage&&t.kaspiSignOutTimerDate<Date.parse(localStorage.getItem("kaspiSignOutTimer"))+t.kaspiSignOutTimer?(t.kaspiSignOutTimer=Date.parse(localStorage.getItem("kaspiSignOutTimer"))+t.kaspiSignOutTimer-t.kaspiSignOutTimerDate,t.bindTimeout(t.kaspiSignOutTimer)):$.ajax({type:"POST",url:"/SignOut"}).always(function(){"true"==$.cookie("is_mobile_app")?window.location="/entrance":(t.alert.show(),t.bindHideMessage())})},e)},logoutPopupHelper.bindHideMessage=function(){var t=this;$("*").off("click").on("click.bindHideMessage",function(){t.$wrapper.fadeOut(200,function(){window.location="/entrance"})}),$(document).on("keydown.logoutPopupHelper",function(e){27==((e=e||window.event).which||e.keyCode||e.charCode)&&t.$wrapper.fadeOut(200,function(){window.location="/entrance"})})},$(document).ready(function(){logoutPopupHelper.init()}),window.DDMANAGER_INIT_URL="https://static.cdn-kaspi.kz/kkz/shared/scripts/segmentsream/init.js",window.DDMANAGER_SDK_URL="https://static.cdn-kaspi.kz/kkz/shared/scripts/segmentsream/sdk.js",function(i){i="cdn.ddmanager.ru";var n=window.ddManager=window.ddManager||[],e=(window.ddListener=window.ddListener||[],window.digitalData=window.digitalData||{});if(e.events=e.events||[],e.changes=e.changes||[],!n.initialize)if(n.invoked)window.console&&console.error&&console.error("Digital Data Manager snippet included twice.");else{for(n.invoked=!0,n.methods="initialize addIntegration persist unpersist on once off".split(" "),n.factory=function(t){return function(){var e=Array.prototype.slice.call(arguments);return e.unshift(t),n.push(e),n}},e=0;e<n.methods.length;e++){var t=n.methods[e];n[t]=n.factory(t)}n.load=function(e){var t=document.createElement("script");t.type="text/javascript",t.charset="utf-8",t.async=!0,t.src=e,(e=document.getElementsByTagName("script")[0]).parentNode.insertBefore(t,e)},n.loadProject=function(e){var t=window.location.search;if(0<=t.indexOf("ddm_test_mode=1"))try{window.localStorage.setItem("_ddm_test_mode","1")}catch(e){}else if(0<=t.indexOf("ddm_test_mode=0"))try{window.localStorage.removeItem("_ddm_test_mode")}catch(e){}0<=t.indexOf("ddm_test_mode=1")||"1"===window.localStorage.getItem("_ddm_test_mode")?n.load("//api.ddmanager.ru/v1/ddm-initialization/"+e+".js"):window.DDMANAGER_INIT_URL?n.load(window.DDMANAGER_INIT_URL):n.load("//"+i+"/ddm-initialization/"+e+".js")},n.CDN_DOMAIN=i,n.SNIPPET_VERSION="1.0.7",n.loadProject("6ef06f71-5f9e-4224-8869-ddc50ed8192f")}}(),"undefined"==typeof ourProductsHelper&&(window.ourProductsHelper={}),ourProductsHelper={init:function(){(this.$wrapper=$(".ourProducts__wrapper")).length&&this.bindDdlClicks()},bindDdlClicks:function(){$(".ourProducts__link").click(function(){var e=$(this);e.data("ddl-label")&&((digitalData=digitalData||{}).events=digitalData.events||[],digitalData.events.push({name:"Clicked Horizontal Menu Item on Main",category:"Behaviour",action:"Clicked Horizontal Menu Main",label:e.data("ddl-label")}))})}},$(function(){$(".startSection__swiper").length&&ourProductsHelper.init()}),"undefined"==typeof AbTestHelper&&(window.AbTestHelper={}),AbTestHelper={init:function(){var e,t,i=this;i.$shopBlock=$("#block_SHOP"),!(i.$wrapper=$("#block_SHOP")).length||"True"!=i.$shopBlock.data("enabled")||"undefined"==(e=$.cookie("test.user.group"))&&null==e||(t=$("#block_SHOP > div"),0<=e&&e<=20&&t.hasClass("kaspiShopping--static")?$("#block_SHOP").each(function(){i.bindDdlCategory($("#block_SHOP"))}):40<e&&e<=60?$("#block_SHOP").each(function(){t.hasClass("shopCarousel")&&!t.hasClass("dy_carousel")?i.bindDdlCarousel($("#block_SHOP")):$("#block_SHOP > div").hasClass("kaspiShopping--static")&&i.bindDdlCategory($("#block_SHOP"))}):60<e&&e<=100&&$("#block_SHOP > div").hasClass("kaspiShopping--static")&&i.bindDdlCategory($("#block_SHOP")))},bindDdlCarousel:function(){var e=this.$shopBlock;if(e.hasClass(".shopCarousel__item"))return null;var t=e.find(".shopCarousel__header").text(),e=e.find(".shopCarousel__item").attr("data_list_id"),i=[],n=0;_objectValues($(".shopCarousel__item")).filter(function(e){return $(e).hasClass("shopCarousel__item")}).forEach(function(e){var t=$(e),e={id:t.data("id"),position:++n,name:t.find(".shopCarousel__item--title_link").text().trim(),url:t.attr("href")};i.push(e)}),window.digitalData=window.digitalData||{},window.digitalData.recommendation=window.digitalData.recommendation||[],window.digitalData.recommendation.push({listId:e,listName:t,items:i})},bindDdlCategory:function(){if(this.$shopBlock.hasClass(".shopCarousel__item"))return null;var i=[],n=0;_objectValues($(".shop-categories__card-item")).filter(function(e){return $(e).hasClass("shop-categories__card-item")}).forEach(function(e){var t=$(e),e={id:t.attr("category_id"),position:++n,name:t.find(".shop-categories__card-title span").html().trim().replace("<br>"," "),url:t.attr("href")};i.push(e)}),window.digitalData=window.digitalData||{},window.digitalData.recommendation=window.digitalData.recommendation||[],window.digitalData.recommendation.push({listId:"shop-categories-list",listName:"Категорий товаров магазина",items:i})}},$(function(){$(".startSection__swiper").length&&AbTestHelper.init()}),$(function(){onlineProductsAlertHelper.init()}),window.onlineProductsAlertHelper={init:function(){"true"===$.cookie("is_mobile_app")?(this.bindMessageAlert(),this.bindFailAlert()):this.bindAppAlert()},bindMessageAlert:function(e){function t(){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}(function(){$(".onlineCheckout__item__inner[data-message=True]").click(function(e){e.preventDefault(),new bindMessageAlert($(this)).show()})}),bindFailAlert:function(){$(".onlineCheckout__item__inner[data-enabled=False]").click(function(e){e.preventDefault(),new onlineFailAlert($(this)).show()})},bindAppAlert:function(){$(".onlineCheckout__item__inner").on("click",function(e){e.preventDefault(),new onlineAppLink($(this)).show()})}},window.bindMessageAlert=function(t){this.init=function(){var e=this;e.$html=$("html"),e.$body=$("body"),e.$wrapper=$("#BankLoanDeferralAlert"),e.$wrapper.appendTo(e.$body),e.bindHideMessage(),e.setParams(t)},this.bindHideMessage=function(){var e=this;e.$wrapper.add(".onlineAppLink__button").on("click.onlineAppLink",function(){$("body").unmask(),e.hide()}),$(".onlineAppLink__wrapper",e.$wrapper).on("click.onlineAppLink",function(e){(e=e||window.event).stopPropagation()})},this.show=function(){var e=this;e.$wrapper.fadeIn(200,function(){e.$wrapper.addClass("onlineAppLink--active"),e.$body.hasClass("body--noscroll")||e.$body.addClass("body--noscroll"),e.$html.addClass("html--noscroll")})},this.hide=function(){var e=this;e.$body.removeClass("body--noscroll"),e.$html.removeClass("html--noscroll"),e.$wrapper.fadeOut(200,function(){e.$wrapper.removeClass("onlineAppLink--active")}),$(document).off("keydown.ourProductsAlertHelper")},this.setParams=function(e){var t=$(".onlineCheckout__itemAppAlertTitle",e).html(),i=$(e).data("months"),i="0"==i[0]?i.replace("0",""):i,t=t.replace("25 июля",i),i=($("#BankLoanDeferralAlertTitle").html(t),$(".onlineCheckout__itemAppLink",e).text());$("#BankLoanDeferralAlertLink").attr("href",i)},this.init()},window.onlineAppLink=function(t){this.init=function(){var e=this;e.$html=$("html"),e.$body=$("body"),e.$wrapper=$("#BankAppAlert"),e.$wrapper.appendTo(e.$body),e.bindHideMessage(),e.setParams(t)},this.bindHideMessage=function(){var e=this;e.$wrapper.add(".onlineAppLink__button").on("click.onlineAppLink",function(){$("body").unmask(),e.hide()}),$(".onlineAppLink__wrapper",e.$wrapper).on("click.onlineAppLink",function(e){(e=e||window.event).stopPropagation()})},this.show=function(){var e=this;e.$wrapper.fadeIn(200,function(){e.$wrapper.addClass("onlineAppLink--active"),e.$body.hasClass("body--noscroll")||e.$body.addClass("body--noscroll"),e.$html.addClass("html--noscroll")})},this.hide=function(){var e=this;e.$body.removeClass("body--noscroll"),e.$html.removeClass("html--noscroll"),e.$wrapper.fadeOut(200,function(){e.$wrapper.removeClass("onlineAppLink--active")}),$(document).off("keydown.ourProductsAlertHelper")},this.setParams=function(e){var t=$(".onlineCheckout__itemAppAlertTitle",e).text(),t=($("#BankAppAlertTitle").text(t),$(".onlineCheckout__itemAppLink",e).text());$("#BankAppAlertLink").attr("href",t)},this.init()},window.onlineFailAlert=function(t){this.init=function(){var e=this;e.$html=$("html"),e.$body=$("body"),e.$wrapper=$("#BankFailAlert"),e.$wrapper.appendTo(e.$body),e.bindHideMessage(),e.setParams(t)},this.bindHideMessage=function(){var t=this;$(".onlineCheckout__item__alert__button",t.$wrapper).off("click.startHelper").on("click.startHelper",function(e){e.preventDefault(),t.hide()})},this.show=function(){var e=this;window.animate?animate.slide(e.$wrapper,"100vw","0",!0,function(){e.$body.addClass("body--noscroll")}):(e.$wrapper.show(),e.$body.addClass("body--noscroll"))},this.hide=function(){this.$body.removeClass("body--noscroll"),window.animate?animate.slide(this.$wrapper,"0","100vw",!1):this.$wrapper.hide()},this.setParams=function(e){var t=$(".onlineCheckout__itemFailAlertText",e).text(),t=($("#BankFailAlertText").text(t),$(".onlineCheckout__itemFailAlertTime",e).text());$("#BankFailAlertTime").text(t)},this.init()};