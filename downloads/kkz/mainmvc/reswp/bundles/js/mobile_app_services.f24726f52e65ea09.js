"use strict";"undefined"==typeof appServicesHelper&&(window.appServicesHelper={}),appServicesHelper={init:function(){var e=this;e.$html=$("html"),e.$body=$("body"),e.$appServicesAds=$(".ourProducts__item--ad[data-counter-id='market']"),e.$appServicesMarket=$(".app-services [data-id='market']"),e.$appServicesMagnum=$(".app-services._magnum"),e.$appServicesChoco=$(".app-services [data-id='chocofood']"),e.callMobApi(),e.bindEventAdClick(),e.bindEventMarketClick(),e.bindEventChocoClick()},callMobApi:function(){window.kaspi&&"function"==typeof kaspi.send&&window.kaspi.send("getAllAppBadges","","appServicesHelper.setAppBadges")},bindEventMarketClick:function(){this.$appServicesMarket.on("click",function(){var e=$.cookie("extInstallId"),t={event:"main_market_click",parameters:{page_path:[$(this).attr("href")]}};e&&"None"!==e&&"none"!==e&&"[None]"!==e&&(t.parameters.ext_install_Id=[e]),window.mobapp&&"function"==typeof window.mobapp.logServerEvents&&"function"==typeof window.mobapp.getAppInfo&&mobapp.getAppInfo("appServicesHelper.logEventClickToKafka"),window.mobapp&&"function"==typeof window.mobapp.logAnalyticEvent&&mobapp.logAnalyticEvent(JSON.stringify(t))})},bindEventChocoClick:function(){this.$appServicesChoco.on("click",function(){var e=$.cookie("extInstallId"),t={event:"main_chocofood_click",parameters:{page_path:[$(this).attr("href")]}};e&&"None"!==e&&"none"!==e&&"[None]"!==e&&(t.parameters.ext_install_Id=[e]),window.mobapp&&"function"==typeof window.mobapp.logAnalyticEvent&&mobapp.logAnalyticEvent(JSON.stringify(t))})},bindEventAdClick:function(){this.$appServicesAds.on("click",function(){var e=$.cookie("extInstallId"),t={event:"main_market_click",parameters:{page_path:[$(".ourProducts__link",this).attr("href")]}};e&&"None"!==e&&"none"!==e&&"[None]"!==e&&(t.parameters.ext_install_Id=[e]),window.mobapp&&"function"==typeof window.mobapp.logServerEvents&&"function"==typeof window.mobapp.getAppInfo&&mobapp.getAppInfo("appServicesHelper.logEventClickToKafka"),window.mobapp&&"function"==typeof window.mobapp.logAnalyticEvent&&mobapp.logAnalyticEvent(JSON.stringify(t))})},logEventClickToKafka:function(e){e&&(e=JSON.parse(e),e={events:[{name:"mainMarket",sendType:"always",parameters:{sys:"MAINPAGE",evt:"INFO",time:(new Date).toISOString(),appId:e.installId,devId:e.deviceId,type:"click",extInstallId:$.cookie("extInstallId")}}]},mobapp.logServerEvents(JSON.stringify(e)))},setAppBadges:function(e,t){t&&((t=JSON.parse(t).appBadges).length||($(".ourProducts__badge-count","[data-counter-id='market']").hide(),$(".app-services__badge-count").hide()),t.forEach(function(e){"market"===e.appId&&appServicesHelper.setMarketBadgeCount(e.count),"ads"===e.appId&&appServicesHelper.setAdBadgeCount(e.count)}))},setChocofoodBadgeCount:function(e){+e&&e<=999?($(".app-services__badge-count","[data-id='chocofood']").text(e),$(".app-services__badge-count","[data-id='chocofood']").show()):+e&&999<e?($(".app-services__badge-count","[data-id='chocofood']").text("999+"),$(".app-services__badge-count","[data-id='chocofood']").show()):$(".app-services__badge-count","[data-id='chocofood']").hide()},setMarketBadgeCount:function(e){+e&&e<=999?($(".app-services__badge-count","[data-id='market']").text(e),$(".app-services__badge-count","[data-id='market']").show()):+e&&999<e?($(".app-services__badge-count","[data-id='market']").text("999+"),$(".app-services__badge-count","[data-id='market']").show()):$(".app-services__badge-count","[data-id='market']").hide()},setAdBadgeCount:function(e){(+e&&e<=999?($(".ourProducts__badge-count","[data-counter-id='market']").text(e),$(".ourProducts__badge-count","[data-counter-id='market']").show(),$(".ourProducts__item--ad .badge")):+e&&999<e?($(".ourProducts__badge-count","[data-counter-id='market']").text("999+"),$(".ourProducts__badge-count","[data-counter-id='market']").show(),$(".ourProducts__item--ad .badge")):$(".ourProducts__badge-count","[data-counter-id='market']")).hide(),+e&&99<e?$(".ourProducts__badge-count","[data-counter-id='market']").addClass("_shift"):$(".ourProducts__badge-count","[data-counter-id='market']").removeClass("_shift")}},$(function(){appServicesHelper.init()});