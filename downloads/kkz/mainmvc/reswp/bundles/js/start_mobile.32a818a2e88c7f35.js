"use strict";function _slicedToArray(e,t){return _arrayWithHoles(e)||_iterableToArrayLimit(e,t)||_unsupportedIterableToArray(e,t)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _iterableToArrayLimit(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var i,a,o,r,l=[],s=!0,d=!1;try{if(o=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;s=!1}else for(;!(s=(i=o.call(n)).done)&&(l.push(i.value),l.length!==t);s=!0);}catch(e){d=!0,a=e}finally{try{if(!s&&null!=n.return&&(r=n.return(),Object(r)!==r))return}finally{if(d)throw a}}return l}}function _arrayWithHoles(e){if(Array.isArray(e))return e}function _createForOfIteratorHelper(e,t){var n,i,a,o,r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(r)return i=!(n=!0),{s:function(){r=r.call(e)},n:function(){var e=r.next();return n=e.done,e},e:function(e){i=!0,a=e},f:function(){try{n||null==r.return||r.return()}finally{if(i)throw a}}};if(Array.isArray(e)||(r=_unsupportedIterableToArray(e))||t&&e&&"number"==typeof e.length)return r&&(e=r),o=0,{s:t=function(){},n:function(){return o>=e.length?{done:!0}:{done:!1,value:e[o++]}},e:function(e){throw e},f:t};throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _unsupportedIterableToArray(e,t){var n;if(e)return"string"==typeof e?_arrayLikeToArray(e,t):"Map"===(n="Object"===(n=Object.prototype.toString.call(e).slice(8,-1))&&e.constructor?e.constructor.name:n)||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?_arrayLikeToArray(e,t):void 0}function _arrayLikeToArray(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}window.ddlStart={init:function(){window.digitalData=window.digitalData||{version:"1.1.2"},window.digitalData.website=window.digitalData.website||{section:"Главная",environment:"production",appInfo:"1.2.3"},window.digitalData.page=window.digitalData.page||{type:"home"},window.digitalData.events=window.digitalData.events||[];var e=this;$(function(){e.parsePersonalData(),e.bindScrollToSection(),e.bindOnlineProductsClick(),e.bindCallUserProperties(),e.bindSignInButton(),e.bindFooterEvents(),e.prepareOnlineProductElementsForPushToDdl(),e.bindScrollEventToWindow()})},bindCallUserProperties:function(){var e=$.cookie("test.user.group"),t={props:{test_group:[e]}};e&&window.mobapp&&"function"==typeof window.mobapp.setAwsUserProperties&&mobapp.setAwsUserProperties(JSON.stringify(t)),e&&window.mobapp&&"function"==typeof window.mobapp.setUserProperties&&mobapp.setUserProperties(JSON.stringify(t))},parsePersonalData:function(){var e=$("html").data("personal");try{var t=JSON.parse($(".pers-info").text())}catch(e){}e&&((e=e.split("|"))[4]&&(window.digitalData.user=JSON.parse(decodeURIComponent(e[1]).replace(/\+/g," ")),window.digitalData.user.isLoggedIn=e[0].toLowerCase()),e[5]&&(window.digitalData.website=JSON.parse(decodeURIComponent(e[2]).replace(/\+/g," ")))),t&&(window.digitalData.user=window.digitalData.user||{},window.digitalData.user.pcm=t,$(".pers-info").remove())},bindScrollToSection:function(){var r=this,l=10;function e(){r.scrollEventListeners.forEach(function(e,t){var n,i,a,o=$("#"+e.id);o.length&&(n=o.offset().top,o=o.outerHeight(),i=$(window).height(),a=$(window).scrollTop(),o&&n+o-i-l<a&&(-1===e.name.indexOf("Online")&&-1===e.name.indexOf("Travel")&&window.digitalData.events.push({name:"Viewed "+e.name+" Section On Main",category:"Behaviour",label:e.label}),r.scrollEventListeners.splice(t,1)))})}r.scrollEventListeners=[],window.digitalData.events=window.digitalData.events||[],$("section[data-block-ddl-name]:visible").each(function(e){var t={id:$(this).attr("id"),name:$(this).attr("data-block-ddl-name"),label:parseInt(e+1)};-1!==$(this).attr("data-block-ddl-name").indexOf("Online")&&(t.label+=" / ",$(".onlineCheckout__itemText:visible",$(this)).each(function(e){0<e&&(t.label+=", "),t.label+=$(this).text().trim()})),r.scrollEventListeners.push(t)}),$(window).scroll(function(){e()}),e()},bindOnlineProductsClick:function(){$("#onlineCheckoutSection .onlineCheckout__item").on("click.ddlStart",function(){digitalData.events.push({name:"Clicked Online Products Element on Main",action:"Clicked Online Products Element on Main",category:"Behaviour",label:$(".onlineCheckout__item__inner",this).data("ddl-name")})})},bindMapsLinks:function(){$("#block_MAPS .kaspi-maps-link").on("click.ddlStart",function(){digitalData.events.push({name:"Clicked Maps Link On Main",category:"Behaviour",action:"Clicked Maps Link"})}),$("#block_MAPS .kaspi-maps-item").on("click.ddlStart",function(){n,digitalData.events.push({name:"Clicked Maps Element On Main",category:"Behaviour",action:"Clicked Maps Element",label:$(this).text().html()})})},bindSignInButton:function(){$(".headerAdapt__signin").on("click.ddlStart",function(){digitalData.events.push({name:"Clicked Login Icon On Main",category:"Behaviour",action:"Clicked Login Icon"})})},isVisible:function(e){if(!(e instanceof Element))throw Error("DomUtil: elem is not an element.");var t=getComputedStyle(e);if("none"!==t.display&&"visible"===t.visibility&&!(t.opacity<.1)&&e.offsetWidth+e.offsetHeight+e.getBoundingClientRect().height+e.getBoundingClientRect().width!==0){t={x:e.getBoundingClientRect().left+e.offsetWidth/2,y:e.getBoundingClientRect().top+e.offsetHeight/2};if(!(t.x<0||t.x>(document.documentElement.clientWidth||window.innerWidth)||t.y<0||t.y>(document.documentElement.clientHeight||window.innerHeight))){var n=document.elementFromPoint(t.x,t.y);do{if(n===e)return!0}while(n=!!n&&n.parentNode)}}return!1},prepareOnlineProductElementsForPushToDdl:function(){var a=this,e=[].slice.call($(".onlineCheckout__item__inner[data-ddl-view=false]"));e.length?e.forEach(function(t){var e,n,i;ddlStart.isVisible(t)&&(clearTimeout(a.timerOnlineProducts),$(t).attr("data-ddl-view",!0),e=$(t).data("ddl-name"),n=[].slice.call($(".startSection__wrapper[data-name]")).findIndex(function(e){return $(e).is("#block_BANK")}),i=[].slice.call($(".onlineCheckout__item__inner")).findIndex(function(e){return e===t}),ddlStart.$onlineProductsListLabels=ddlStart.$onlineProductsListLabels?ddlStart.$onlineProductsListLabels+", "+ ++i+" - "+e:n+" / "+ ++i+" - "+e,ddlStart.pushViewedDdlEventForOnlineProducts())}):($(window).off("scroll",ddlStart.prepareOnlineProductElementsForPushToDdl),$(".onlineCheckout__items").off("scroll",ddlStart.prepareOnlineProductElementsForPushToDdl))},pushViewedDdlEventForOnlineProducts:function(){var e=this;e.timerOnlineProducts=setTimeout(function(){e.$onlineProductsListLabels&&digitalData.events.push({name:"Viewed Online Products Section on Main",action:"Viewed Online Products Section on Main",category:"Behaviour",label:e.$onlineProductsListLabels}),e.$onlineProductsListLabels=null},300)},bindScrollEventToWindow:function(){$(window).on("scroll",this.prepareOnlineProductElementsForPushToDdl),$(".onlineCheckout__items").on("scroll",this.prepareOnlineProductElementsForPushToDdl)},bindFooterEvents:function(){this.scrollEventListeners=this.scrollEventListeners||[],$("#footer").length&&this.scrollEventListeners.push({id:"footer",name:"Footer"}),$("#footer .footerSocials__item").on("click.ddlStart",function(){digitalData.events.push({name:"Clicked Footer Icon On Main",category:"Behaviour",action:"Clicked Footer Icon",label:$(this).attr("data-ddl-label")})})}},window.ddlStart.init();var shopPersonalizationBlockHelper,lazyLoadHelper,kaspiMenuClass=function(){var a={},n=!1,e=(this.init=function(){e(),n=!0},function(){(a={containerId:null,menu:$("#kaspiMenuAdapt"),distance:0,cont_val:79,menu_val:-79,speed:400,body:$("body"),html:$("html")}).headers=$("header"),a.footers=$("footer"),a.main=$("main"),a.distance=a.main.css("left"),a.topOffset=0,a.search=$("#searchBlock"),a.searchField=$(".search__field",a.search),$("body").append(a.menu)}),i=(this.open=function(e){var t;"true"==$.cookie("is_mobile_app")&&window.mobapp&&"function"==typeof window.mobapp.openMenu||(n||this.init(),a.active=!0,"auto"!=a.distance&&"0px"!=a.distance||(a.topOffset=$("body").scrollTop(),t=$("#main").css("margin-top").replace("px","")-a.topOffset,$("#main").css("margin-top",t+"px"),i(a.cont_val,0,e,!1),a.body.scrollTop(0)),(digitalData=digitalData||{}).events=digitalData.events||[],digitalData.events.push({name:"Opened Side Menu",category:"Behaviour",action:"Side Menu"}))},this.close=function(e){1==a.active&&(a.active=!1,i(0,a.menu_val,e,!0))},this.toggle=function(e){a.active?this.close(a.speed):this.open(a.speed)},function(e,t,n,i){a.headers.add(a.footers).add(a.main).add(a.search).add(a.searchField).animate({left:e+"vw"},n),i?("true"!==a.menu.attr("data-leavenoscroll")&&(a.html.removeClass("html--noscroll"),a.body.removeClass("body--noscroll")),a.html.removeClass("html--noPointerEvents"),a.body.removeClass("body--noPointerEvents")):(a.html.addClass("html--noscroll html--noPointerEvents"),a.body.addClass("body--noscroll body--noPointerEvents")),a.menu.animate({left:t+"vw"},n,function(){var e;i&&(e=+$("#main").css("margin-top").replace("px","")+a.topOffset,$("#main").css("margin-top",e+"px"),$("body").scrollTop(a.topOffset))})});this.isActive=function(){return a.active}};"undefined"==typeof kaspiMenu&&(window.kaspiMenu={}),kaspiMenu.menu=null,kaspiMenu.init=function(){var e=kaspiMenu;e.burgerBtn=$(".headerAdapt__navButton"),e.bindHamburger(),"true"==$.cookie("is_mobile_app")&&window.mobapp&&"function"==typeof window.mobapp.openMenu||(e.menu=new kaspiMenuClass,e.bindAccordion(),e.bindChangeLocale(),e.bindSelectRegion(),e.bindDllClicks())},kaspiMenu.toggle=function(e){var t=kaspiMenu;(e=e||window.event)&&e.stopPropagation(),t.menu.isActive()?t.hide(e):t.show(e)},kaspiMenu.show=function(e){var t=kaspiMenu;(e=e||window.event)&&e.stopPropagation(),t.menu.open(400),t.bindCloseOnBodyClick()},kaspiMenu.hide=function(e){var t=kaspiMenu;(e=e||window.event)&&e.preventDefault(),t.menu.close(400),t.unbindCloseOnBodyClick()},kaspiMenu.fastHide=function(e){var t=kaspiMenu;(e=e||window.event)&&e.preventDefault(),t.menu.close(0),t.unbindCloseOnBodyClick()},kaspiMenu.bindHamburger=function(){var t=this;t.burgerBtn.off("click.bindHamburger").on("click.bindHamburger",function(e){(e=e||window.event).preventDefault(),"true"==$.cookie("is_mobile_app")&&window.mobapp&&"function"==typeof window.mobapp.openMenu?window.mobapp.openMenu():t.toggle(e)})},kaspiMenu.bindCloseOnResize=function(){var t=this;$(window).off("orientationchange.bindHamburger resize.bindHamburger").on("orientationchange.bindHamburger resize.bindHamburger",function(e){(e=e||window.event).preventDefault(),t.fastHide(e)})},kaspiMenu.unbindCloseOnResize=function(){$(window).off("orientationchange.bindHamburger resize.bindHamburger")},kaspiMenu.bindCloseOnBodyClick=function(){var t=this;$("header, footer, main").off("click.kaspiMenu").on("click.kaspiMenu",function(e){(e=e||window.event).preventDefault(),t.hide(e)})},kaspiMenu.unbindCloseOnBodyClick=function(){$("header, footer, main").off("click.kaspiMenu")},kaspiMenu.bindAccordion=function(){$(".kaspiMenu__user").off("click.kaspiMenu").on("click.kaspiMenu",function(){$(this).toggleClass("kaspiMenu__user--opened"),$(".kaspiMenu__settings").toggle()})},kaspiMenu.bindChangeLocale=function(){$("#menuSwitchLocale").off("click.kaspiMenu").on("click.kaspiMenu",function(e){(e=e||window.event).preventDefault(),e.stopPropagation();e=$(this).data("locale");$.ajax({url:"/SwitchLocale/"+e,type:"POST",dataType:"json",success:function(e){"OK"==e.status&&location.reload()}}).always(function(){})})},kaspiMenu.bindSelectRegion=function(){$(".kaspiMenu__showRegionSelection").off("click.kaspiMenu").on("click.kaspiMenu",function(){var t;"undefined"==typeof selectRegionMobileHelper?((t=$("body")).mask(),$.ajax({url:"/start/SelectRegion/mobile",type:"POST",dataType:"html"}).done(function(e){e&&e.trim()?t.append(e):location.href="/entrance"}).always(function(){t.unmask()})):selectRegionMobileHelper.show()})},kaspiMenu.bindDllClicks=function(){$(".kaspiMenu__item").click(function(){($t=$(this)).data("ddl-label")&&((digitalData=digitalData||{}).events=digitalData.events||[],digitalData.events.push({name:"Clicked Side Menu Item on Main",category:"Behaviour",action:"Clicked Side Menu Main",label:$t.data("ddl-label")}))})},$(function(){kaspiMenu.init()}),window.animate={slide:function(e,t,n,i,a,o){"number"!=typeof o&&(o=200);var r=$(e);r.css("left",t),i&&r.show(),r.animate({left:n},o,function(){i||r.hide(),"function"==typeof a&&a()})}},"undefined"==typeof startHelper&&(window.startHelper={}),startHelper.init=function(){window.deviceType=$("body").hasClass("body--mobile")?"Mobile":"Desktop";var e=this;e.loadTimeout=50,e.bindBlockLazyLoad(),e.bindPopup(),e.bindCampaignDdl(),e.bindShowPopupWindow(),e.bindCheckIsApproved(),e.bindDdlZhuma(),e.bindDdlAbtestOldMain(),(e=$("html").data("personal"))&&(e=e.split("|"),this.isAuthenticated="True"===e[0],this.showAuthElements(this.isAuthenticated),"True"==e[4]?("False"==e[5]&&$(".PromoBadges__toggle").each(function(){$(this).removeClass("_second")}),$(".PromoBadges__toggle").show()):"True"==e[5]?$(".PromoBadges__toggle").show():$(".PromoBadges__toggle").hide(),$("#block_SHOP").attr("data-enabled",e[6]))},startHelper.showAuthElements=function(e){e?$(".authenticated_only").removeClass("authenticated_only"):$(".unauthenticated_only").removeClass("unauthenticated_only")},startHelper.bindBlockLazyLoad=function(){var e=this,t=$(".startSection__wrapper[data-lazy=true]");t.length&&($(window).scroll(function(){t=$(".startSection__wrapper[data-lazy=true]"),e.loadVisibleBlocks(t.first())}),e.loadVisibleBlocks(t))},startHelper.loadVisibleBlocks=function(e){var a=this;e.each(function(){var i=$(this),e=i.data("name"),t=i.data("block-data");i.offset().top-1.5*$(window).height()<$(window).scrollTop()&&!a.waitForNextBlock&&(a.waitForNextBlock=!0,i.attr("data-lazy",!1),setTimeout(function(){a.waitForNextBlock=!1,a.loadVisibleBlocks($(".startSection__wrapper[data-lazy=true]").first())},a.loadTimeout),$.ajax({url:"/start/GetBlock2/"+e,dataType:"html",type:"POST",headers:{"Content-Type":"application/json"},data:JSON.stringify({json:t,blockName:e}),success:function(e,t,n){if("success"===t&&200===n.status&&e&&e.trim())try{i.html(e)}catch(e){console.log("failed to append block: "+e),i.hide()}else i.hide(),a.loadVisibleBlocks($(".startSection__wrapper[data-lazy=true]").first())},error:function(e,t){i.hide(),console.log(e+" "+t)}}))})},startHelper.bindShowPopupWindow=function(){var e=void 0!==$.cookie("is_mobile_app")&&"true"===$.cookie("is_mobile_app").toLowerCase(),t=function(e,t){t=t||window.location.href;e=e.replace(/[\[\]]/g,"\\$&");e=new RegExp("[?&]"+e+"(=([^&#]*)|&|#|$)").exec(t);return e?e[2]?decodeURIComponent(e[2].replace(/\+/g," ")):"":null}("startOpenPopup"),n=$("#LoanOnlineAlert");t&&!e&&"loan"==t&&$(n).appendTo("body").fadeIn(0,function(){$(this).addClass("onlineAppLink--active"),$("body").hasClass("body--blurred")||$("body").hasClass("body--noscroll")||$("body").addClass("body--blurred body--noscroll"),$("html").addClass("html--noscroll")})},startHelper.bindPopupHide=function(){$(".startMainPopups .startMainPopups__close").on("click",function(e){(e=e||window.event).preventDefault()})},startHelper.bindDdlZhuma=function(){window.digitalData=window.digitalData||{},window.digitalData.campaigns=window.digitalData.campaigns||[],$(".startMainBannerZhuma .startMainBanner__item").each(function(e){window.digitalData.campaigns.push({id:$(this).data("campaign-id"),name:$(this).data("name"),position:e+1})})},startHelper.bindCheckIsApproved=function(){window.digitalData.user=window.digitalData.user||{},window.digitalData.user.segment=window.digitalData.user.segment||{};var e="isApproved"==$(".paramApproved").data("name")?$(".paramApproved"):null;e&&(e=e.val()||null,window.digitalData.user.segment.segment_1=e)},startHelper.bindCampaignDdl=function(){window.digitalData=window.digitalData||{},window.digitalData.campaigns=window.digitalData.campaigns||[],$(".campaign__wrapper").each(function(){window.digitalData.campaigns.push({id:$(this).data("campaign-id"),name:$(this).data("name")})})},startHelper.bindDdlAbtestOldMain=function(){$("body").hasClass("_abtestMain")&&(window.digitalData=window.digitalData||{},window.digitalData.events=window.digitalData.campaigns||[],window.digitalData.events.push({category:"Behaviour",name:"Throw Timeout Exception Test On Main",action:"Throw Timeout Exception Test On Main"}))},startHelper.bindPopup=function(){window.digitalData=window.digitalData||{},window.digitalData.events=window.digitalData.events||[];var e=$(".popup"),t=$(".popup .popup__close");e.on("click.startHelper",function(){var e=$(this).data("popup-id");window.digitalData.events.push({category:"Behaviour",name:"Clicked Popup",action:"Clicked Popup",label:e})}),t.on("click.startHelper",function(e){(e=e||window.event).stopPropagation(),e.preventDefault();var e=$(this).closest(".popup"),t=e.data("popup-id"),o=e.data("id");e.hide(),$("body").removeClass("body--popups"),setTimeout(function(){t=o,(n=function(){var t={},e=$.cookie("popups");e&&e.split("&").forEach(function(e){e=e.split("=");t[e[0]]=e[1]});return t}())[t]="hide";var e,t,n,i=n,a=[];for(e in i)i.hasOwnProperty(e)&&a.push(e+"="+i[e]);$.cookie.raw=!0,$.cookie("popups",a.join("&")),$.cookie.raw=!1},0),window.digitalData.events.push({category:"Behaviour",name:"Closed Popup",action:"Closed Popup",label:t})}),e.each(function(){var e=$(this).data("popup-id");window.digitalData.events.push({category:"Behaviour",name:"Viewed Popup",action:"Viewed Popup",label:e})})},$(function(){window.mobjs={updateAppBadges:function(e){appServicesHelper.setAppBadges("",e)},onResume:function(){var e;$.cookie("reload_page")||((e=new Date).setTime(e.getTime()+3e5),$.cookie("reload_page","false",{expires:e}),$.get("/start/alertbanner/getInfo").then(function(e){var t=!!e&&!!e.enabled,e=!!e&&!!e.zhumaEnabled;(t||$("#alert-banner").length||e&&!$(".startMainBanner__item--319").length||!e&&$(".startMainBanner__item--319").length)&&window.location.reload()}))}},startHelper.init()}),void 0===window.promoTimers&&(window.promoTimers={}),promoTimers.init=function(){var e=this;e.$allItemsWithTimer=$(".startMainBanner__item").has(".startMainBanner__finishDate[data-current]"),e.$allItemsWithTimer.length&&(e.$listTimers=new Map,e.setListTimers(),e.updateTime(),e.showTimers(),e.bindSetInterval())},promoTimers.setListTimers=function(){var n=this;[].slice.call($(".startMainBanner__item").has(".startMainBanner__finishDate[data-current]")).forEach(function(e){var t=$(e).data("campaign-id"),e=$(".startMainBanner__finishDate",e),e=$(e).data("end"),e=new Date(e)-new Date((new Date).toLocaleString("en-US",{timeZone:"Asia/Almaty"}));n.$listTimers.set(t,e)})},promoTimers.updateTime=function(){var e,t=new Map,n=(this.CheckDifferenceBeetwenTwoDate(),_createForOfIteratorHelper(this.$listTimers));try{for(n.s();!(e=n.n()).done;){var i=_slicedToArray(e.value,2),a=i[0],o=i[1];o<=1e3?this.showMessagePromoExpired(a):t.set(a,o-1e3)}}catch(e){n.e(e)}finally{n.f()}this.$listTimers=t},promoTimers.CheckDifferenceBeetwenTwoDate=function(){var n=this;[].slice.call($(".startMainBanner__item").has(".startMainBanner__finishDate[data-current]")).forEach(function(e){var t=$(e).data("campaign-id"),e=$(".startMainBanner__finishDate",e),e=$(e).data("end"),e=new Date(e)-new Date((new Date).toLocaleString("en-US",{timeZone:"Asia/Almaty"}));3e3<n.$listTimers.get(t)-e&&n.$listTimers.set(t,e)})},promoTimers.showTimers=function(){var i,a=this,t=_createForOfIteratorHelper(a.$listTimers);try{for(t.s();!(i=t.n()).done;)!function(){var e=_slicedToArray(i.value,2),t=e[0],e=e[1],n=$([].slice.call($(a.$allItemsWithTimer)).filter(function(e){return $(e).data("campaign-id")===t})).find(".startMainBanner__timer"),e=a.formatDate(e).split(":");$(".h",n).text(e[0]),$(".m",n).text(e[1]),$(".s",n).text(e[2]),$(n).hasClass("_hide")&&$(n).removeClass("_hide")}()}catch(e){t.e(e)}finally{t.f()}},promoTimers.showMessagePromoExpired=function(t){var e=$([].slice.call($(this.$allItemsWithTimer)).filter(function(e){return $(e).data("campaign-id")===t}));e.find(".startMainBanner__finishDate").hide(),e.find(".startMainBanner__expired").show()},promoTimers.bindSetInterval=function(){var e=this;e.$globalSetInerval=setInterval(function(){e.updateTime(),e.showTimers()},1e3)},promoTimers.formatDate=function(e){var e=new Date(e),t=e.getUTCHours(),n=e.getUTCMinutes(),e=e.getSeconds();return t.toString().padStart(2,"0")+":"+n.toString().padStart(2,"0")+":"+e.toString().padStart(2,"0")},$(function(){promoTimers.init()}),shopPersonalizationBlockHelper={init:function(){(this.$wrapper=$(".shopCarousel__items, .shopCarousel")).length&&this.bindLazyLoad()},bindLazyLoad:function(){function e(){!1===t&&(t=!0,setTimeout(function(){n.forEach(function(t){t.getBoundingClientRect().left<=window.innerWidth&&0<=t.getBoundingClientRect().right&&"none"!==getComputedStyle(t).display&&(t.src=t.dataset.src||t.src,$(t).removeClass("lazy"),$(n).data("id","false"),0===(n=n.filter(function(e){return e!==t})).length&&document.querySelector(".shopCarousel .shopCarousel__item").removeEventListener("scroll",e))}),t=!1},200))}var n=[].slice.call($(".shopCarousel img[data-lazy=true]")),t=!1;document.querySelector(".shopCarousel .shopCarousel__items").addEventListener("scroll",e)}},$(function(){shopPersonalizationBlockHelper.init()}),"undefined"==typeof updateAppAlertHelper&&(window.updateAppAlertHelper={}),updateAppAlertHelper={init:function(){var e=this;e.$html=$("html"),e.$body=$("body"),e.wrapper=$(".UpdateAppAlert._travel"),e.wrapperGoldKid=$(".UpdateAppAlert._goldkid"),e.$mobappVersion=$.cookie("mobapp_version"),e.$appVersion="",e.$button=$(".ourProducts__item--travel._update"),e.$buttonKids=$(".onlineCheckout__item__inner[data-type=kid]"),e.showAlert(),e.removeAlert(),e.getApiInfo()},showAlert:function(){var t=this;t.$button.off().on("click",function(e){e.preventDefault(),t.$body.addClass("body--noscroll"),t.$html.addClass("html--noscroll"),t.wrapper.show()}),t.$buttonKids.off().on("click",function(e){e.preventDefault(),t.$body.addClass("body--noscroll"),t.$html.addClass("html--noscroll"),t.wrapperGoldKid.show()})},getAppVersion:function(e){var t;(t=e?JSON.parse(e):t)&&4.1<=+(t.appVersion?t.appVersion.slice(0,3):null)&&this.$buttonKids.off()},getApiInfo:function(){null!=window.mobapp&&"undefined"!=window.mobapp&&"function"==typeof window.mobapp.getAppInfo&&mobapp.getAppInfo("updateAppAlertHelper.getAppVersion")},removeAlert:function(){var t=this;$(".UpdateAppAlert__close").add(t.wrapper).add(t.wrapperGoldKid).on("click",function(e){e.preventDefault(),t.wrapper.hide(),t.wrapperGoldKid.hide(),t.$body.removeClass("body--noscroll"),t.$html.removeClass("html--noscroll")}),$(".UpdateAppAlert__wrapper",t.wrapper).off().on("click.updateAppAlertHelper",function(e){(e=e||window.event).stopPropagation()}),$(".UpdateAppAlert__wrapper",t.wrapperGoldKid).off().on("click.updateAppAlertHelper",function(e){(e=e||window.event).stopPropagation()})}},$(function(){"true"===$.cookie("is_mobile_app")&&updateAppAlertHelper.init()}),lazyLoadHelper={init:function(){this.addImageElements()},bindScrollEventToWindow:function(){$(window).off("scroll",this.addImageElements).on("scroll",this.addImageElements),$("#ks-categories .ks-nav").off("scroll",this.addImageElements).on("scroll",this.addImageElements)},addImageElements:function(){var e=[].slice.call($(".lazy[data-src]"));e.length?(e.forEach(function(e){var t,n;lazyLoadHelper.isVisible(e)&&(t=(e=$(e)).data("src"),n=document.createElement("img"),t&&(n.src=t,$(n).attr("onerror","onErrorLazyLoad(this)"),$(e).closest(".ADVT").length||e.addClass("_bgwhite"),$(n).appendTo(e),e.removeClass("lazy")))}),lazyLoadHelper.bindScrollEventToWindow()):($(window).off("scroll",this.addImageElements),$("#ks-categories .ks-nav").off("scroll",this.addImageElements))},isVisible:function(e){var e=e.getBoundingClientRect(),t=e.top,e=e.bottom;return t<window.innerHeight&&0<=e}},$(function(){lazyLoadHelper.init()});