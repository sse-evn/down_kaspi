"use strict";var kaspiMenuClass=function(){var a={},i=!1,e=(this.init=function(){e(),i=!0},function(){(a={containerId:null,menu:$("#kaspiMenuAdapt"),distance:0,cont_val:79,menu_val:-79,speed:400,body:$("body"),html:$("html")}).headers=$("header"),a.footers=$("footer"),a.main=$("main"),a.distance=a.main.css("left"),a.topOffset=0,a.search=$("#searchBlock"),a.searchField=$(".search__field",a.search),$("body").append(a.menu)}),o=(this.open=function(e){var n;"true"==$.cookie("is_mobile_app")&&window.mobapp&&"function"==typeof window.mobapp.openMenu||(i||this.init(),a.active=!0,"auto"!=a.distance&&"0px"!=a.distance||(a.topOffset=$("body").scrollTop(),n=$("#main").css("margin-top").replace("px","")-a.topOffset,$("#main").css("margin-top",n+"px"),o(a.cont_val,0,e,!1),a.body.scrollTop(0)),(digitalData=digitalData||{}).events=digitalData.events||[],digitalData.events.push({name:"Opened Side Menu",category:"Behaviour",action:"Side Menu"}))},this.close=function(e){1==a.active&&(a.active=!1,o(0,a.menu_val,e,!0))},this.toggle=function(e){a.active?this.close(a.speed):this.open(a.speed)},function(e,n,i,o){a.headers.add(a.footers).add(a.main).add(a.search).add(a.searchField).animate({left:e+"vw"},i),o?("true"!==a.menu.attr("data-leavenoscroll")&&(a.html.removeClass("html--noscroll"),a.body.removeClass("body--noscroll")),a.html.removeClass("html--noPointerEvents"),a.body.removeClass("body--noPointerEvents")):(a.html.addClass("html--noscroll html--noPointerEvents"),a.body.addClass("body--noscroll body--noPointerEvents")),a.menu.animate({left:n+"vw"},i,function(){var e;o&&(e=+$("#main").css("margin-top").replace("px","")+a.topOffset,$("#main").css("margin-top",e+"px"),$("body").scrollTop(a.topOffset))})});this.isActive=function(){return a.active}},t=("undefined"==typeof kaspiMenu&&(window.kaspiMenu={}),kaspiMenu.menu=null,kaspiMenu.init=function(){var e=kaspiMenu;e.burgerBtn=$(".headerAdapt__navButton"),e.bindHamburger(),"true"==$.cookie("is_mobile_app")&&window.mobapp&&"function"==typeof window.mobapp.openMenu||(e.menu=new kaspiMenuClass,e.bindAccordion(),e.bindChangeLocale(),e.bindSelectRegion(),e.bindDllClicks())},kaspiMenu.toggle=function(e){var n=kaspiMenu;(e=e||window.event)&&e.stopPropagation(),n.menu.isActive()?n.hide(e):n.show(e)},kaspiMenu.show=function(e){var n=kaspiMenu;(e=e||window.event)&&e.stopPropagation(),n.menu.open(400),n.bindCloseOnBodyClick()},kaspiMenu.hide=function(e){var n=kaspiMenu;(e=e||window.event)&&e.preventDefault(),n.menu.close(400),n.unbindCloseOnBodyClick()},kaspiMenu.fastHide=function(e){var n=kaspiMenu;(e=e||window.event)&&e.preventDefault(),n.menu.close(0),n.unbindCloseOnBodyClick()},kaspiMenu.bindHamburger=function(){var n=this;n.burgerBtn.off("click.bindHamburger").on("click.bindHamburger",function(e){(e=e||window.event).preventDefault(),"true"==$.cookie("is_mobile_app")&&window.mobapp&&"function"==typeof window.mobapp.openMenu?window.mobapp.openMenu():n.toggle(e)})},kaspiMenu.bindCloseOnResize=function(){var n=this;$(window).off("orientationchange.bindHamburger resize.bindHamburger").on("orientationchange.bindHamburger resize.bindHamburger",function(e){(e=e||window.event).preventDefault(),n.fastHide(e)})},kaspiMenu.unbindCloseOnResize=function(){$(window).off("orientationchange.bindHamburger resize.bindHamburger")},kaspiMenu.bindCloseOnBodyClick=function(){var n=this;$("header, footer, main").off("click.kaspiMenu").on("click.kaspiMenu",function(e){(e=e||window.event).preventDefault(),n.hide(e)})},kaspiMenu.unbindCloseOnBodyClick=function(){$("header, footer, main").off("click.kaspiMenu")},kaspiMenu.bindAccordion=function(){$(".kaspiMenu__user").off("click.kaspiMenu").on("click.kaspiMenu",function(){$(this).toggleClass("kaspiMenu__user--opened"),$(".kaspiMenu__settings").toggle()})},kaspiMenu.bindChangeLocale=function(){$("#menuSwitchLocale").off("click.kaspiMenu").on("click.kaspiMenu",function(e){(e=e||window.event).preventDefault(),e.stopPropagation();e=$(this).data("locale");$.ajax({url:"/SwitchLocale/"+e,type:"POST",dataType:"json",success:function(e){"OK"==e.status&&location.reload()}}).always(function(){})})},kaspiMenu.bindSelectRegion=function(){$(".kaspiMenu__showRegionSelection").off("click.kaspiMenu").on("click.kaspiMenu",function(){var n;"undefined"==typeof selectRegionMobileHelper?((n=$("body")).mask(),$.ajax({url:"/start/SelectRegion/mobile",type:"POST",dataType:"html"}).done(function(e){e&&e.trim()?n.append(e):location.href="/entrance"}).always(function(){n.unmask()})):selectRegionMobileHelper.show()})},kaspiMenu.bindDllClicks=function(){$(".kaspiMenu__item").click(function(){($t=$(this)).data("ddl-label")&&((digitalData=digitalData||{}).events=digitalData.events||[],digitalData.events.push({name:"Clicked Side Menu Item on Main",category:"Behaviour",action:"Clicked Side Menu Main",label:$t.data("ddl-label")}))})},$(function(){kaspiMenu.init()}),0);